<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Anime Template">
    <meta name="keywords" content="Anime, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Yoo | Tube</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
	
    <!-- Css Styles -->
    <link rel="stylesheet" href="../template/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="../template/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="../template/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="../template/css/plyr.css" type="text/css">
    <link rel="stylesheet" href="../template/css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="../template/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="../template/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="../template/css/style.css" type="text/css">
    
    <!-- Google Icons -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
    @font-face {
	  font-family: 'Material Icons';
	  font-style: normal;
	  font-weight: 400;
	  /*src: url(https://example.com/MaterialIcons-Regular.eot); For IE6-8 */
	  src: local('Material Icons'),
	    local('MaterialIcons-Regular')
	    /*url(https://example.com/MaterialIcons-Regular.woff2) format('woff2'),
	    url(https://example.com/MaterialIcons-Regular.woff) format('woff'),
	    url(https://example.com/MaterialIcons-Regular.ttf) format('truetype')*/;
	}
	.material-icons {
	  font-family: 'Material Icons';
	  font-weight: normal;
	  font-style: normal;
	  font-size: 30px;  /* Preferred icon size */
	  display: inline-block;
	  line-height: 1;
	  text-transform: none;
	  letter-spacing: normal;
	  word-wrap: normal;
	  white-space: nowrap;
	  direction: ltr;
	  color: red;
	
	  /* Support for all WebKit browsers. */
	  -webkit-font-smoothing: antialiased;
	  /* Support for Safari and Chrome. */
	  text-rendering: optimizeLegibility;
	
	  /* Support for Firefox. */
	  -moz-osx-font-smoothing: grayscale;
	
	  /* Support for IE. */
	  font-feature-settings: 'liga';
	}
    </style>

</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
    <!-- 메뉴바 -->
    <header class="header">
        <div class="container">
            <div class="row">
                <div class="col-lg-2">
                    <div class="header__logo">
                        <a href="homepage.html">
                            <img src="../template/img/logo.png" alt="">
                        </a>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="header__nav">
                        <nav class="header__menu mobile-menu">
                            <ul>
                                <li class="active"><a href="homepage.html">Homepage</a></li>
                                <li><a href="#">Categories <span class="arrow_carrot-down"></span></a>
                                    <ul class="dropdown">
                                        <li><a href="#">Categories</a></li>
                                        <li><a href="#">Anime Details</a></li>
                                        <li><a href="#">Anime Watching</a></li>
                                        <li><a href="uploadpage.html">Upload</a></li>
                                        <li><a href="yousignup.html">Sign Up</a></li>
                                        <li><a href="youlogin.html">Login</a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Our Blog</a></li>
                                <li><a href="#">Contacts</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="col-lg-2">
                    <div class="header__right">
                    
                    	<span id="profile">
                        	<a href="youlogin.html"><button class="material-icons">login</button></a>
                        </span>
                       
                        
                        
                        <!-- 돋보기부분 주석처리
                        <a href="#" class="search-switch"><span class="icon_search"></span></a> 
                        -->
                        
                    </div>
                </div>
            </div>
            <div id="mobile-menu-wrap"></div>
        </div>
    </header>
    <!-- Header End -->

    <!-- Hero Section Begin -->
    <!-- 움직이는 화면 -->
    <section class="hero">
        <div class="container">
            <div class="hero__slider owl-carousel">
                <div class="hero__items set-bg" data-setbg="../template/thumbnail/tntitle1.jpg">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="hero__text">
                                <div class="label">장르</div>
                                <h2>제목을 여기에 넣으세요</h2>
                                <p>영상 소개글을 조금 길게 적을 수 있네요</p>
                                <a href="#"><span>Watch Now</span> <i class="fa fa-angle-right"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="hero__items set-bg" data-setbg="../template/thumbnail/tntitle2.jpg">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="hero__text">
                                <div class="label">장르를 여기에</div>
                                <h2>제목을 여기에 적으시면 됩니다</h2>
                                <p>영상 소개글을 조금 길게 적으면 됩니다.</p>
                                <a href="#"><span>Watch Now</span> <i class="fa fa-angle-right"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="hero__items set-bg" data-setbg="../template/thumbnail/tntitle3.jpg">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="hero__text">
                                <div class="label">장르를 길게</div>
                                <h2>제목을 여기에 적으면 됩니다</h2>
                                <p>영상 소개를 여기에 적으면 됩니다.</p>
                                <a href="#"><span>Watch Now</span> <i class="fa fa-angle-right"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
    </section>
    <!-- Hero Section End -->

    <!-- Product Section Begin -->
    <!-- 나열된 화면 -->
    <section class="product spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="trending__product">
                        <!--트렌딩 나우 부분 view all 부분 링크넣기-->
                        <div class="row">
                            <div class="col-lg-8 col-md-8 col-sm-8">
                                <div class="section-title">
                                    <h4>Trending Now</h4>
                                </div>
                            </div>
                            <!--  viewAll부분
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <div class="btn__all">
                                    <a href="#" class="primary-btn">View All <span class="arrow_right"></span></a>
                                </div>
                            </div>
                            -->
                        </div>
                        <!--트렌딩 영상 6개 섬네일-->
                        <div class="row">

                        </div>
                        
                    </div>
                    
                </div>

                <!-- 사이드 / top view 부분-->
                <div class="col-lg-4 col-md-6 col-sm-8">
                    <div class="product__sidebar">
                        <div class="product__sidebar__view">
                            <div class="section-title">
                                <h5>Top Views</h5>
                            </div>
                            <!-- 필터부분
                            <ul class="filter__controls">
                                <li class="active" data-filter="*">Day</li>
                                <li data-filter=".week">Week</li>
                                <li data-filter=".month">Month</li>
                                <li data-filter=".years">Years</li>
                            </ul>
 							-->
                            <div class="filter__gallery">


            </div>
        </div>
    </div>
    
</div>
</div>
</div>
</div>
</section>
<!-- Product Section End -->

<!-- Footer Section Begin -->
<footer class="footer">
    <div class="page-up">
        <a href="#" id="scrollToTopButton"><span class="arrow_carrot-up"></span></a>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="footer__logo">
                    <a href="./index.html"><img src="../template/img/logo.png" alt=""></a>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="footer__nav">
                    <ul>
                        <li class="active"><a href="homepage.html">Homepage</a></li>
                        <li><a href="#">Categories</a></li>
                        <li><a href="#">Our Blog</a></li>
                        <li><a href="#">Contacts</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-3">
                <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
                  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>

              </div>
          </div>
      </div>
  </footer>
  <!-- Footer Section End -->

  <!-- 업로드 폼으로 바꾸는 것도 괜찮을듯. -->
  <!-- Search model Begin -->
  <div class="search-model">
    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch"><i class="icon_close"></i></div>
        <form class="search-model-form">
            <input type="text" id="search-input" placeholder="Search here.....">
            <div id="uploadForm"></div>
        </form>
    </div>
</div>
<!-- Search model end -->

<!-- Js Plugins -->
<script src="../template/js/jquery-3.3.1.min.js"></script>
<script src="../template/js/bootstrap.min.js"></script>
<script src="../template/js/player.js"></script>
<script src="../template/js/jquery.nice-select.min.js"></script>
<script src="../template/js/mixitup.min.js"></script>
<script src="../template/js/jquery.slicknav.js"></script>
<script src="../template/js/owl.carousel.min.js"></script>
<script src="../template/js/main.js"></script>


<script>


	$(document).ready(function () {
		
		console.log(document.cookie)
		
		profile()
			
	});
	
	function profile () {
		
		if (document.cookie) {
			
		let cookies = document.cookie.split('; ');
		
		let email = cookies[0].split('=');
		let name = email[1].split('@');
		let id = name[0];
		
		let logoutBtn = $('<button />').attr('onclick','logout()').html('<i class="material-icons">logout</i>');
		
		if (id) {
			
			$('#profile').html('');
			$('#profile').append( $('<a />').append( $('<h6 />').html(id+'님').css('color','red') ) );
			$('#profile').append(logoutBtn);
			
		}
		}
		
	}

	function logout () {
	
	
		if (confirm('로그아웃 하시겠습니까?')) {
			
			document.cookie = 'email=; expires=0; path=/';
			document.cookie = 'author=; expires=0; path=/';
			window.location.href="homepage.html";
		
		}
		
	}
	
    let data;

    $.ajax({
        url:'../youHomeServlet',
        dataType:'json',
        success: function (result) {

            data = result;

            for ( let datum of result) {
            	trendingNow(datum);
                topView(datum);
            }

        },
        error: function (reject) {
            console.log(reject);
        }
    });

    function trendingNow (home) {
    //생성
        //sm6
     let sm6 = $('<div />').addClass('col-lg-4 col-md-6 col-sm-6');

        //pi
        let pi = $('<div />').addClass('product__item');
            //bg
            let bg = $('<div />').addClass('product__item__pic set-bg');
                $(bg).attr('data-setbg',"../template/thumbnail/"+home.tnTitle); // 섬네일-main.js에서 일괄적용.
                $(bg).css('background-image', 'url(../template/thumbnail/'+home.tnTitle+')'); // 섬네일(수동)
                //$(bg).html('<a href="'+'#'+'"></a>');             //영상페이지 주소 넣어서 영상클릭시에도 이동하게하기
                let ep = $('<div />').addClass('ep');
                    ep.html('10/10');                                                   //회차정보, 임의로 넣어둠
                let comment = $('<div />').addClass('comment');
                    let ic = $('<i />').addClass('fa fa-comments'); 
                    $(ic).html(home.commentCnt);                                        //댓글수
                let view = $('<div />').addClass('view');
                    let iv = $('<i />').addClass('fa fa-eye').html(home.viewNum);        //조회수

            //pit
            let pit = $('<div />').addClass('product__item__text');
                let ul = $('<ul />').append(
                    $('<li />').html('대분류'),                                             //분류1
                    $('<li />').html('소분류')                                              //분류2
                );
                let h5 = $('<h5 />').append(
                    $('<a />').attr('href', '#').html(home.title)               //영상페이지 주소,제목 넣기
                );

    //구조
    $(sm6).append(

        $(pi).append(

            $(bg).append(
                ep,
                $(comment).append(ic),
                $(view).append(iv)
            ),

            $(pit).append(ul, h5)
        )
    );
    
    $('.trending__product').children().eq(1).append(sm6);

}


function topView (home) {
    //생성
        //sv
     let sv = $('<div />').addClass('product__sidebar__view__item set-bg mix').attr('data-setbg','../template/img/sidebar/tv-1.jpg');
     $(sv).css('background-image', 'url(../template/thumbnail/'+home.tnTitle+')');

        //ep
        let ep = $('<div />').addClass('ep');
        	ep.html('10/10'); //에피소드 숫자
            
        // view    
        let view = $('<div />').addClass('view');
            let icon = $('<i />').addClass('fa fa-eye');
       	view.html(home.viewNum);
       	
       	//h5
       	let h5 = $('<h5 />')
       		//let a = $('<a />').attr('href', '#').html(home.title)
       		let a = $('<a />').attr('onclick', 'viNumSender('+home.viNum+')').html(home.title) //링크 걸어주기
            

    //구조
    $(sv).append(
    		ep,
    		$(view).append(icon),
            $(h5).append(a)
    );
    
    
    $('.filter__gallery').append(sv);

}
	
function viNumSender(viNum) {
	
	setCookie('viNum',viNum);
	window.location.href="youwatching.html/"+viNum;
	
}

function setCookie (cname, cval) {

	const times = 3;
	const d = new Date();
	//d.setTime(d.getTime() + 1000 * 60 * 60 * times);
	d.setTime(d.getTime() + 1000 );
	console.log(d.toUTCString);
	document.cookie = cname + '=' + cval + '; expires=' + d.toUTCString + '; path=/';
	
}
</script>



</body>

</html>